<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, minimum-scale=1, maximum-scale=1">
    <title>Hero</title>

    <!-- Futuristic Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">

    <style>
      /* ---------- General Reset ---------- */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html, body {
        height: 100%;
        width: 100%;
        overflow: hidden;
        background: linear-gradient(135deg, #0b0f1a 0%, #16213e 50%, #1a1a2e 100%);
        font-family: 'Orbitron', 'Press Start 2P', monospace;
        color: #e0e0e0;
        animation: bgShift 15s ease-in-out infinite alternate;
      }

      @keyframes bgShift {
        0%   { background: linear-gradient(135deg, #63b3ed 0%, #3182ce 100%); }  /* Day */
        33%  { background: linear-gradient(135deg, #ff9966 0%, #ff5e62 100%); }  /* Sunset */
        66%  { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); }  /* Night */
        100% { background: linear-gradient(135deg, #63b3ed 0%, #3182ce 100%); }  /* Back to Day */
      }

      /* ---------- Title ---------- */
      h1 {
        font-size: 2.8rem;
        color: #00bfff;
        text-shadow: 0 0 10px #00bfff, 0 0 20px #0077ff;
        margin-top: 40px;
        letter-spacing: 2px;
        animation: glowTitle 2s ease-in-out infinite alternate;
      }

      @keyframes glowTitle {
        from { text-shadow: 0 0 10px #00bfff, 0 0 30px #0077ff; }
        to { text-shadow: 0 0 20px #00ffff, 0 0 40px #00bfff; }
      }

      /* ---------- Center Canvas ---------- */
      center {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 90vh;
      }

      /* ---------- Canvas Styling ---------- */
      canvas {
        border: 3px solid #00bfff;
        border-radius: 10px;
        box-shadow: 0 0 25px rgba(0, 191, 255, 0.7),
                    0 0 60px rgba(0, 191, 255, 0.4);
        background-color: #000;
        transition: all 0.5s ease-in-out;
      }

      canvas:hover {
        transform: scale(1.02);
        box-shadow: 0 0 35px rgba(0, 191, 255, 0.9),
                    0 0 80px rgba(0, 191, 255, 0.5);
      }

      /* ---------- Loading Canvas ---------- */
      #loadingCanvas {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 10px;
        border: 2px solid #00bfff;
      }

      /* ---------- Footer ---------- */
      footer {
        text-align: center;
        padding: 15px;
        font-size: 0.8rem;
        color: #bbb;
        position: fixed;
        bottom: 0;
        width: 100%;
        background: rgba(0, 0, 0, 0.4);
        border-top: 1px solid #222;
      }

      footer a {
        color: #00bfff;
        text-decoration: none;
        font-weight: bold;
      }

      footer a:hover {
        color: #00ffff;
      }

      footer button {
        margin-top: 5px;
        background: #00bfff;
        color: #fff;
        border: none;
        border-radius: 5px;
        padding: 6px 12px;
        font-size: 0.9rem;
        cursor: pointer;
        box-shadow: 0 0 10px #00bfff;
        transition: all 0.3s ease-in-out;
      }

      footer button:hover {
        background: #00ffff;
        box-shadow: 0 0 20px #00ffff;
        transform: scale(1.05);
      }
    </style>
  </head>

  <body>
    <center>
      <div>
        <h1>Hero</h1>
        <canvas id="loadingCanvas" oncontextmenu="event.preventDefault()" width="800" height="600"></canvas>
        <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>
      </div>
    </center>

    <script type='text/javascript'>
      function goFullScreen(){
        var canvas = document.getElementById("canvas");
        if(canvas.requestFullscreen)
          canvas.requestFullscreen();
        else if(canvas.webkitRequestFullScreen)
          canvas.webkitRequestFullScreen();
        else if(canvas.mozRequestFullScreen)
          canvas.mozRequestFullScreen();
      }

      function FullScreenHook(){
        var canvas = document.getElementById("canvas");
        canvas.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        canvas.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
      }

      var loadingContext = document.getElementById('loadingCanvas').getContext('2d');
      function drawLoadingText(text) {
        var canvas = loadingContext.canvas;
        loadingContext.fillStyle = "rgb(142, 195, 227)";
        loadingContext.fillRect(0, 0, canvas.scrollWidth, canvas.scrollHeight);
        loadingContext.font = '2em Orbitron';
        loadingContext.textAlign = 'center';
        loadingContext.fillStyle = "rgb(11, 86, 117)";
        loadingContext.fillText(text, canvas.scrollWidth / 2, canvas.scrollHeight / 2);
        loadingContext.fillText("Powered by Emscripten", canvas.scrollWidth / 2, canvas.scrollHeight / 4);
        loadingContext.fillText("Powered by LÃ–VE", canvas.scrollWidth / 2, canvas.scrollHeight / 4 * 3);
      }

      window.onload = function () { window.focus(); };
      window.onclick = function () { window.focus(); };

      window.addEventListener("keydown", function(e) {
        // Prevent arrow/space scrolling
        if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {
          e.preventDefault();
        }
      }, false);

      var Module = {
        arguments: ["./game.love"],
        INITIAL_MEMORY: 67108864,
        printErr: console.error.bind(console),
        canvas: (function() {
          var canvas = document.getElementById('canvas');
          canvas.addEventListener("webglcontextlost", function(e) {
            alert('WebGL context lost. Please reload the page.');
            e.preventDefault();
          }, false);
          return canvas;
        })(),
        setStatus: function(text) {
          if (text) {
            drawLoadingText(text);
          } else if (Module.remainingDependencies === 0) {
            document.getElementById('loadingCanvas').style.display = 'none';
            document.getElementById('canvas').style.visibility = 'visible';
          }
        },
        totalDependencies: 0,
        remainingDependencies: 0,
        monitorRunDependencies: function(left) {
          this.remainingDependencies = left;
          this.totalDependencies = Math.max(this.totalDependencies, left);
          Module.setStatus(left
            ? 'Preparing... (' + (this.totalDependencies-left) + '/' + this.totalDependencies + ')'
            : 'All downloads complete.');
        }
      };
      Module.setStatus('Downloading...');
      window.onerror = function(event) {
        Module.setStatus('Exception thrown, see JavaScript console');
        Module.setStatus = function(text) {
          if (text) Module.printErr('[post-exception status] ' + text);
        };
      };

      var applicationLoad = function(e) {
        Love(Module);
      }
    </script>

    <script type="text/javascript" src="game.js"></script>
    <script async type="text/javascript" src="love.js" onload="applicationLoad(this)"></script>

    <footer>
      <p>Built with <a href="https://github.com/Davidobot/love.js" target="_blank">love.js</a>  
      <button onclick="goFullScreen();">Go Fullscreen</button><br>
      <small>Hint: Reload the page if the screen is blank.</small></p>
    </footer>
  </body>
</html>
